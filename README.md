# Url shortener
Техническое задание:
Реализовать систему коротких ссылок используя python/uvicorn без сторонних фреймворков.
Пример системы:
1) пост запрос на генерацию ссылки, где в теле запроса передается ссылка и в ответ отдается сгенерированная ссылка
2) гет запрос на получения ссылки по короткой.
Вместо базы данных использовать просто глобальную переменную словарь.

## Как запустить?

1. Склонировать проект \
```git clone https://github.com/pavelepanov/url_shortener```
2. Создать виртуальное окружение \
```python3 -m venv venv```
3. Установить зависимости \
```pip install -r requirements.txt```
4. Создать переменную окружения для названия сервиса-сократителя. Для простоты разворачивания добавил в .env переменную окружения и подгрузил её в конфиг. *Этот пункт можно пропустить* \
```DOMAIN_URL=```
5. Запустить проект, как распространяемый пакет \
```python3 -m url_shortener.entrypoint.http_server ```

## Как тестировать?
Можно выбрать, к примеру, postman или посылать запросы напрямую через терминал с помощью curl
### Пример с curl
1. Создать короткую ссылку на основе полной ссылки и получить короткую ссылку\
```curl -X POST -d '{"key": "http://localhost:8080"}' -H "Content-Type: application/json" http://localhost:8080```
2. Получить полную ссылку по короткой ссылке. Короткую ссылку можно получить после её создания \
```curl "http://localhost:8080/greet?full_url=my_site/37d007"```

![post](/docs/POST.jpg "POST example")
![get](/docs/GET.jpg "GET example")

## О проекте
Реализовал слоистую архитектуру, выделив 4 уровня:
1. Domain
2. Application
3. Infrastructure
4. Presentation

Написал http адаптер на python

Реализовал IoC-контейнер и использовал DI

На доменном уровне использовал:
1. Value object для проверки бизнес-инвариантов
2. Domain service для работы над entity
3. Унифицировал работу с доменным слоем, написав протоколы и выделив тем самым интерфейсы
